<template>  <div style="width: 100%;height: 100%">    <CusTabWrap>      <template v-slot:tabBar>        <CusTabBar style="height: 40px">          <CusTabItem v-for="item in tabItems">            {{item.title}}          </CusTabItem>        </CusTabBar>      </template>      <template v-slot:tabContainer>        <CusTabContainer>          <CusTabContainerItem v-for="item in tabItems">            <ul v-if="item.type==='list'" class="news-list">              <li v-for="data in item.data">                <div class="wrap">                  <div class="left">                    <h5 class="title">                      {{data.title}}                    </h5>                  </div>                  <div class="right">                    <div class="img-box">                      <img :src="data.img" alt="">                    </div>                  </div>                </div>              </li>            </ul>            <ul v-if="item.type==='video'" class="news-video-list">              <li v-for="data in item.data">                <div class="wrap">                  <div class="video">                    <img :src="data.video" alt="">                  </div>                  <h5 class="title">                    {{data.title}}                  </h5>                </div>              </li>            </ul>            <div class="load-more" :data-type="item.type">              正在加载……            </div>          </CusTabContainerItem>        </CusTabContainer>      </template>    </CusTabWrap>  </div></template><script lang="ts">  import { Component, Vue } from 'vue-property-decorator';  import TabController from '@/components/cus-tabs/Controller';  import { Category, NewsItem } from '@/utils/types';  import { fetchCategory, fetchData } from '@/utils/api';  @Component({    components: {},  })  export default class News extends Vue {    public tabItems: Category[] = [];    private loading = false;    mounted() {      fetchCategory().then(data => {        data.forEach(o => {          o.data = [];        });        this.tabItems = data;        this.tabController = new TabController({          data: this.tabItems,          tabScroll: true,          duration: 500,          fixTabBar: true,          scrollEndOffset: 50,          onScrollEnd: (i) => {            if (this.loading) {              return;            }            console.log('end', i);            this.loading = true;            fetchData(this.tabItems[i].type).then(d => {              this.tabItems[i].data!.push(...d);              this.loading = false;            });          },          onChange: (i) => {            fetchData(this.tabItems[i].type).then(items => {              if (!this.tabItems[i].data!.length) {                this.tabItems[i].data!.push(...items);              }            });          }        });        fetchData('list').then(o => {          this.tabItems[0].data!.push(...o);        });      });    }    data() {      return {        tabController: null,        tabItems: []      };    }    tabController?: TabController<Category>;  }</script><style lang="less" scoped>  @import "style";</style>